# Transform Management Service interface definition

# TODO:
# - Need resolution for transform:
#   Sequence of steps
#   Schedule and bind different?

name: transform_management_service

docstring: |
    Provides capabilities to manage the data transformations available in ION.

spec: https://confluence.oceanobservatories.org/display/syseng/CIAD+DM+OV+Transform+Management+Service

dependencies: [pubsub_management, process_dispatcher_service, resource_registry]
methods:
  create_transform:
    docstring: |
      Create a transform resource and start the process using CEI Process dispatcher. Associate the
      transform to its process definition, in_subscription and out_stream. The transform_id is returned.
    in:
      in_subscription_id: ""
      out_stream_id: ""
      process_definition_id: "" # CEI Process Definition ID
      configuration: {}
    out:
      transform_id: ""
    throws:
      NotFound: If any of the referenced objects are missing

  update_transform:
    docstring: It is not currently possible to update an transform.
    in:
      configuration: {}
    out:

    throws:
     NotImplementedError: Method not implemented

  read_transform:
    docstring: Get an existing transform object.
    in:
      transform_id: ""
    out:
      transform: !Transform

  delete_transform:
    docstring: Delete an existing transform.
    in:
      transform_id: ""
    out:

  # -----------------


  bind_transform:
    docstring: Activate the subscription to bind (start) the transform
    in:
      transform_id: ""
    out:

  schedule_transform:
    docstring: Not currently implemented
    in:
      transform_id: ""
    out:
