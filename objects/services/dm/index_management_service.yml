name: index_management

docstring: |
    Service will primarily manage the inventory and metadata for indexes, via index resource objects,
    that may be created and live in a separate technology. Indexes are used primarily for navigation/filtering of
    resources, not for query

spec: https://confluence.oceanobservatories.org/display/syseng/CIAD+DM+OV+Index+Management+Service

dependencies: [resource_registry]

methods:
  create_index:
    in:
      index_name: ""
      index_type: ""
      options: {}
      datastore_name: ""
      shards: 5
      replicas: 1 
    out:
      index_id: ""

  update_index:
    in:
      index: !Index
    out:
      success: True

  read_index:
    in:
      index_id: ""
    out:
      index: !Index

  delete_index:
    in:
      index_id: ""
    out:
      success: True

  list_indexes:
    in:
    out:

  find_indexes:
    in:
      filters: !ResourceFilter
    out:
      index_list: []

  query:
    in:
      index_id: ""
      field: ""
      query: ""
    out:
      resource_id: "" 

  span_resources:
    docstring: "Spans resource types and creates filters and rivers for each resource type"
    in:
      index_id: ""
      map_types: True
    out:

  index_resources:
    docstring: "Adds the specified resources to the index"
    in:
      index_id: ""
      resource_ids: []
      filter_name: ""
      datastore_name: ""
      map_resources: False
    out:
      filter_name: ""

  river_start:
    docstring: "Starts a river for indexing"
    in:
      index_id: ""
      index_type: ""
      datastore_name: ""
      river_name: ""
      couchdb_filter: ""
    out:
      success: True 

  mapped_fields:
    docstring: "Determines the searchable fields based on the dynamic maps"
    in:
      index_id: ""
    out:
      success: True
