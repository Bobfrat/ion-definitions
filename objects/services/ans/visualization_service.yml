# Visualization service interface definition

name: visualization_service

docstring: Service is responsible for mantaining user sessions and collecting requested viz products, preparing them before returning them to the web client

dependencies: [resource_registry, pubsub_management, transform_management, data_retriever, dataset_management, workflow_management]


methods:
  # Interface available through the SGS
  init_google_dt_realtime:
    docstring: Request to search for the system transform handling the GDT conversion for the specified DP. Creates a queue to collect the data and a subscription to listen to the queue. Returns a token associate with the queue
    in:
      data_product_id: ""
      query: ""
    out:
      query_token: ""
    throws:
      NotFound: Specified Data product or its visualization product does not exist

  get_google_dt_realtime:
    docstring: Returns the latest 'delta' of the datatable available to be used by the client for preparing a realtime view
    in:
      query_token: ""
    out:
      datatable: ""
    throws:
      NotFound: Specified Data product or its visualization product does not exist


  get_image:
    docstring: Request to fetch an image for a particular DP
    in:
      data_product_id: ""
      image_id: ""
    out:
      image_obj: ""
    throws:
      NotFound: Specified Data product or its visualization product does not exist


