# Visualization service interface definition

name: visualization_service

docstring: Service is responsible for mantaining user sessions and collecting requested viz products, preparing them before returning them to the web client

dependencies: [resource_registry, pubsub_management, transform_management, data_retriever, dataset_management, data_process_management, workflow_management]


methods:
  # Interface available through the SGS
  initiate_realtime_visualization:
    docstring: |
      Initial request required to start a realtime chart for the specified data product. Returns a user specific token associated
      with the request that will be required for subsequent requests when polling data.
    in:
      data_product_id: ""
      query: ""
    out:
      query_token: ""
    throws:
      NotFound: Throws if specified data product id or its visualization product does not exist

  get_realtime_visualization_data:
    docstring: |
      This operation returns a block of visualization data for displaying data product in real time. This operation requires a
      user specific token which was provided from a previsou request to the init_realtime_visualization operation.
    in:
      query_token: ""
    out:
      visualization_data: {}
    throws:
      NotFound: Throws if specified query_token or its visualization product does not exist

  terminate_realtime_visualization_data:
    docstring: |
      This operation terminates and cleans up resources associated with realtime visualization data. This operation requires a
      user specific token which was provided from a previsou request to the init_realtime_visualization operation.
    in:
      query_token: ""
    out:
    throws:
      NotFound: Throws if specified query_token or its visualization product does not exist


  get_visualization_image:
    docstring: Request to fetch an image for a particular DP
    in:
      data_product_id: ""
    out:
      image_obj: ""
    throws:
      NotFound: Throws if specified data product id or its visualization product does not exist

  get_imagelist:
    docstring: Request to fetch an image list available for a particular DP
    in:
      data_product_id: ""
    out:
      image_list: ""
    throws:
      NotFound: Throws if specified data product id or its visualization product does not exist